<!DOCTYPE html>
<html>
<head>
  <title>NEB AI Website</title>
  <style>
    /* Your existing CSS styles remain the same */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 40px;
      background: linear-gradient(135deg, #e8f5e8 0%, #f0f8ff 50%, #ffe8e8 100%);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.08;
      z-index: -1;
      background-image: 
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Ctext x='10' y='30' font-size='20' fill='%23333'%3Eüìö%3C/text%3E%3Ctext x='60' y='25' font-size='12' fill='%23666'%3Ex¬≤+y¬≤=r¬≤%3C/text%3E%3Ctext x='15' y='60' font-size='14' fill='%23666'%3E‚à´f(x)dx%3C/text%3E%3Ctext x='70' y='70' font-size='18' fill='%23333'%3Eüî¨%3C/text%3E%3Ctext x='30' y='85' font-size='16' fill='%23333'%3E‚öóÔ∏è%3C/text%3E%3C/svg%3E"),
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='120' viewBox='0 0 150 120'%3E%3Ctext x='20' y='30' font-size='16' fill='%23555'%3EE=mc¬≤%3C/text%3E%3Ctext x='90' y='25' font-size='20' fill='%23333'%3Eüìñ%3C/text%3E%3Ctext x='30' y='60' font-size='18' fill='%23333'%3EüßÆ%3C/text%3E%3Ctext x='100' y='70' font-size='14' fill='%23666'%3EœÄr¬≤%3C/text%3E%3Ctext x='10' y='100' font-size='16' fill='%23333'%3Eüéì%3C/text%3E%3C/svg%3E");
      background-repeat: repeat;
      background-position: 0 0, 75px 60px;
      animation: float 20s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .container {
      position: relative;
      z-index: 1;
      max-width: 800px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.9);
      padding: 60px 40px;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.2);
    }
    
    h1 {
      color: black;
      font-size: 3em;
      margin-bottom: 30px;
      text-align: center;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      position: relative;
    }
    
    h1::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 4px;
      background: linear-gradient(90deg, #6b8e23, #4169e1, #dc143c);
      border-radius: 2px;
    }
    
    p {
      color: #333;
      font-size: 1.3em;
      line-height: 1.8;
      text-align: center;
      margin-bottom: 40px;
    }
    
    .search-section {
      margin: 40px 0;
      padding: 30px;
      background: linear-gradient(135deg, rgba(107, 142, 35, 0.1), rgba(65, 105, 225, 0.1));
      border-radius: 15px;
      border: 2px solid rgba(107, 142, 35, 0.2);
    }
    
    .search-container {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      position: relative;
    }
    
    .search-input {
      flex: 1;
      padding: 15px 20px;
      font-size: 1.1em;
      border: 2px solid #6b8e23;
      border-radius: 10px;
      outline: none;
      transition: all 0.3s ease;
      background: white;
    }
    
    .search-input:focus {
      border-color: #4169e1;
      box-shadow: 0 0 0 3px rgba(65, 105, 225, 0.1);
    }
    
    .search-button {
      padding: 15px 30px;
      background: linear-gradient(135deg, #6b8e23, #8fbc8f);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .search-button:hover {
      background: linear-gradient(135deg, #5a7a1e, #7daa7d);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(107, 142, 35, 0.3);
    }
    
    .search-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .chat-response {
      display: none;
      margin-top: 20px;
      padding: 20px;
      background: white;
      border-radius: 10px;
      border-left: 4px solid #4169e1;
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .chat-response.active {
      display: block;
    }
    
    .response-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
      color: #4169e1;
      font-weight: bold;
    }
    
    .response-content {
      color: #333;
      line-height: 1.6;
      font-size: 1.05em;
    }
    
    .loading-indicator {
      display: none;
      text-align: center;
      padding: 20px;
    }
    
    .loading-indicator.active {
      display: block;
    }
    
    .loading-dots {
      display: inline-block;
      animation: loading 1.4s infinite;
    }
    
    @keyframes loading {
      0%, 80%, 100% { opacity: 0.5; }
      40% { opacity: 1; }
    }
    
    .quick-searches {
      margin-top: 15px;
    }
    
    .quick-search-label {
      font-size: 0.9em;
      color: #666;
      margin-bottom: 10px;
    }
    
    .suggestion-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .chip {
      padding: 8px 15px;
      background: rgba(65, 105, 225, 0.1);
      border: 1px solid rgba(65, 105, 225, 0.3);
      border-radius: 20px;
      font-size: 0.9em;
      color: #4169e1;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .chip:hover {
      background: rgba(65, 105, 225, 0.2);
      transform: translateY(-1px);
    }
    
    .status-indicator {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin-right: 8px;
      background-color: #dc143c;
    }
    
    .status-indicator.connected {
      background-color: #6b8e23;
    }
    
    .connection-status {
      font-size: 0.8em;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
    }
    
    /* Rest of your existing CSS... */
    .color-accents {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 40px;
      flex-wrap: wrap;
    }
    
    .accent-box {
      width: 120px;
      height: 80px;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.1em;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }
    
    .accent-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }
    
    .olive-green { background: linear-gradient(135deg, #6b8e23, #8fbc8f); }
    .navy-blue { background: linear-gradient(135deg, #4169e1, #6495ed); }
    .red { background: linear-gradient(135deg, #dc143c, #ff6b6b); }
    
    .interactive-elements {
      margin-top: 50px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    
    .feature-card {
      background: white;
      padding: 25px;
      border-radius: 15px;
      text-align: center;
      transition: all 0.3s ease;
      border-left: 5px solid;
    }
    
    .feature-card:nth-child(1) { border-left-color: #6b8e23; }
    .feature-card:nth-child(2) { border-left-color: #4169e1; }
    .feature-card:nth-child(3) { border-left-color: #dc143c; }
    
    .feature-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }
    
    .feature-icon { font-size: 2.5em; margin-bottom: 15px; }
    .feature-title { font-size: 1.2em; font-weight: bold; color: #333; margin-bottom: 10px; }
    .feature-desc { color: #666; font-size: 0.95em; line-height: 1.4; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Welcome to NEB AI</h1>
    <p>This is for NEB students - NEPAL.</p>
    
    <div class="search-section">
      <!-- Connection Status -->
      <div class="connection-status" id="connectionStatus">
        <span class="status-indicator" id="statusIndicator"></span>
        <span id="statusText">Connecting to AI backend...</span>
      </div>
      
      <div class="search-container">
        <input 
          type="text" 
          class="search-input" 
          id="searchInput" 
          placeholder="Ask me anything about NEB curriculum, subjects, or get study help..."
          autocomplete="off"
        />
        <button class="search-button" id="searchButton">
          <span>üîç</span>
          <span>Search</span>
        </button>
      </div>
      
      <div class="quick-searches">
        <div class="quick-search-label">Quick searches:</div>
        <div class="suggestion-chips">
          <div class="chip" onclick="performQuickSearch('What is Newton\'s first law of motion?')">Newton's Laws</div>
          <div class="chip" onclick="performQuickSearch('Explain electric charges and their properties')">Electric Charges</div>
          <div class="chip" onclick="performQuickSearch('Define work and energy in physics')">Work & Energy</div>
          <div class="chip" onclick="performQuickSearch('What is Ohm\'s law?')">Ohm's Law</div>
          <div class="chip" onclick="performQuickSearch('Explain lenses and their properties')">Optics</div>
        </div>
      </div>
      
      <div class="loading-indicator" id="loadingIndicator">
        <span class="loading-dots">ü§ñ AI is thinking...</span>
      </div>
      
      <div class="chat-response" id="chatResponse">
        <div class="response-header">
          <span>ü§ñ</span>
          <span>NEB AI Assistant</span>
        </div>
        <div class="response-content" id="responseContent">
          <!-- Response will appear here -->
        </div>
      </div>
    </div>
    
    <div class="color-accents">
      <div class="accent-box olive-green">Learn</div>
      <div class="accent-box navy-blue">Explore</div>
      <div class="accent-box red">Discover</div>
    </div>
    
    <div class="interactive-elements">
      <div class="feature-card">
        <div class="feature-icon">üìö</div>
        <div class="feature-title">Study Materials</div>
        <div class="feature-desc">Access comprehensive learning resources</div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üî¨</div>
        <div class="feature-title">Lab Simulations</div>
        <div class="feature-desc">Interactive science experiments</div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üìä</div>
        <div class="feature-title">Progress Tracking</div>
        <div class="feature-desc">Monitor your learning journey</div>
      </div>
    </div>
  </div>
  
  <script>
    // Configuration for connecting to your Hugging Face backend
    const API_CONFIG = {
      // Replace with your actual Hugging Face Space URL
      huggingFaceSpaceUrl: 'https://YOUR-USERNAME-YOUR-SPACE-NAME.hf.space',
      // Alternative: if you know your specific space URL, use that
      // huggingFaceSpaceUrl: 'https://huggingface.co/spaces/YOUR-USERNAME/YOUR-SPACE-NAME',
    };
    
    // Global variables
    let isConnected = false;
    let gradioClient = null;
    
    // DOM elements
    const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    const chatResponse = document.getElementById('chatResponse');
    const responseContent = document.getElementById('responseContent');
    const loadingIndicator = document.getElementById('loadingIndicator');
    const statusIndicator = document.getElementById('statusIndicator');
    const statusText = document.getElementById('statusText');
    
    // Initialize the connection
    async function initializeConnection() {
      try {
        // Test connection to Hugging Face Space
        await testConnection();
        setConnectionStatus(true, 'Connected to NEB AI');
      } catch (error) {
        console.error('Connection failed:', error);
        setConnectionStatus(false, 'Connection failed - using demo mode');
      }
    }
    
    // Test connection to backend
    async function testConnection() {
      if (!API_CONFIG.huggingFaceSpaceUrl || API_CONFIG.huggingFaceSpaceUrl.includes('YOUR-')) {
        throw new Error('Please update the Hugging Face Space URL in API_CONFIG');
      }
      
      const testUrl = `${API_CONFIG.huggingFaceSpaceUrl}/api/predict`;
      const response = await fetch(testUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          data: ['test connection', []]
        })
      });
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}`);
      }
      
      isConnected = true;
    }
    
    // Set connection status
    function setConnectionStatus(connected, message) {
      isConnected = connected;
      statusIndicator.className = `status-indicator ${connected ? 'connected' : ''}`;
      statusText.textContent = message;
    }
    
    // Event listeners
    searchButton.addEventListener('click', performSearch);
    searchInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        performSearch();
      }
    });
    
    // Quick search function
    function performQuickSearch(query) {
      searchInput.value = query;
      performSearch();
    }
    
    // Main search function
    async function performSearch() {
      const query = searchInput.value.trim();
      
      if (!query) {
        alert('Please enter a question or topic to search!');
        return;
      }
      
      // Show loading
      loadingIndicator.classList.add('active');
      chatResponse.classList.remove('active');
      searchButton.disabled = true;
      
      try {
        let response;
        
        if (isConnected) {
          // Call Hugging Face Gradio API
          response = await callGradioAPI(query);
        } else {
          // Fallback demo mode
          response = getDemoResponse(query);
        }
        
        displayResponse(response);
        
      } catch (error) {
        console.error('Search error:', error);
        displayError('Sorry, there was an error processing your request. Please try again.');
      } finally {
        loadingIndicator.classList.remove('active');
        searchButton.disabled = false;
      }
    }
    
    // Call Gradio API
    async function callGradioAPI(query) {
      const apiUrl = `${API_CONFIG.huggingFaceSpaceUrl}/api/predict`;
      
      const response = await fetch(apiUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          data: [query, []], // query and empty chat history
          fn_index: 0 // This might need adjustment based on your Gradio interface
        })
      });
      
      if (!response.ok) {
        throw new Error(`API request failed: ${response.status}`);
      }
      
      const result = await response.json();
      
      // Parse Gradio response - adjust based on your actual response structure
      if (result.data && result.data[0] && result.data[0].length > 0) {
        const lastMessage = result.data[0][result.data[0].length - 1];
        return lastMessage[1]; // Assuming [user_message, ai_response] format
      }
      
      throw new Error('Invalid response format');
    }
    
    // Get demo response for fallback
    function getDemoResponse(query) {
      const lowerQuery = query.toLowerCase();
      
      if (lowerQuery.includes('newton') || lowerQuery.includes('motion')) {
        return `Newton's First Law of Motion states that an object at rest stays at rest and an object in motion stays in motion with the same speed and in the same direction unless acted upon by an unbalanced force. This is also known as the law of inertia.
        
Key points:
‚Ä¢ Inertia is the tendency to resist changes in motion
‚Ä¢ A net force is required to change an object's state of motion  
‚Ä¢ Examples: A ball rolling on a smooth surface, objects in a moving car
        
üí° This is a demo response. Connect your Hugging Face backend for detailed AI assistance!`;
      }
      
      if (lowerQuery.includes('electric') || lowerQuery.includes('charge')) {
        return `Electric charge is a fundamental property of matter. There are two types of electric charges:
        
‚Ä¢ Positive charges (like protons)
‚Ä¢ Negative charges (like electrons)

Key principles:
‚Ä¢ Like charges repel each other
‚Ä¢ Unlike charges attract each other  
‚Ä¢ SI unit is coulomb (C)
‚Ä¢ Charge is conserved in closed systems

üí° This is a demo response. Connect your Hugging Face backend for detailed explanations!`;
      }
      
      if (lowerQuery.includes('work') || lowerQuery.includes('energy')) {
        return `Work is done when a force causes displacement of an object.

Formula: W = F √ó s √ó cos(Œ∏)
Where: F = force, s = displacement, Œ∏ = angle between force and displacement

Energy types:
‚Ä¢ Kinetic Energy: KE = ¬Ωmv¬≤
‚Ä¢ Potential Energy: PE = mgh (gravitational)

Work-Energy Theorem: Work done = Change in kinetic energy

üí° This is a demo response. Connect your Hugging Face backend for detailed solutions!`;
      }
      
      return `I understand you're asking about "${query}".
      
To get detailed, accurate responses from the NEB AI system:
1. Make sure your Hugging Face Space is running
2. Update the huggingFaceSpaceUrl in the code
3. Ensure your Gradio app is properly deployed

Current status: Demo mode - please connect to your backend for full AI capabilities.

üí° Try asking about Newton's Laws, Electric Charges, Work & Energy, or Ohm's Law for demo responses!`;
    }
    
    // Display response
    function displayResponse(text) {
      chatResponse.classList.add('active');
      responseContent.innerHTML = formatResponse(text);
    }
    
    // Display error
    function displayError(message) {
      chatResponse.classList.add('active');
      responseContent.innerHTML = `<div style="color: #dc143c; font-weight: bold;">‚ùå ${message}</div>`;
    }
    
    // Format response with HTML
    function formatResponse(text) {
      let formatted = text.replace(/\n/g, '<br>');
      formatted = formatted.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
      formatted = formatted.replace(/\*(.*?)\*/g, '<em>$1</em>');
      formatted = formatted.replace(/‚Ä¢/g, '&bull;');
      return formatted;
    }
    
    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize connection
      initializeConnection();
      
      // Add click interactions
      const heading = document.querySelector('h1');
      const accentBoxes = document.querySelectorAll('.accent-box');
      const featureCards = document.querySelectorAll('.feature-card');
      
      heading.addEventListener('click', function() {
        alert('Welcome to NEB AI - Your Educational Journey Starts Here!');
      });
      
      accentBoxes.forEach((box, index) => {
        box.addEventListener('click', function() {
          const messages = [
            'üéì Ready to Learn with AI? Let\'s start!',
            'üîç Explore endless possibilities in education!',
            'üí° Discover new ways to understand concepts!'
          ];
          alert(messages[index]);
        });
      });
      
      featureCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
          this.style.transform = 'translateY(-5px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
          this.style.transform = 'translateY(0) scale(1)';
        });
      });
    });
  </script>
</body>
</html>
